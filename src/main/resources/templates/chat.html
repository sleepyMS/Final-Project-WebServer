<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>MBTI Test</title>
    <style>
        /* 질문과 라디오 버튼을 수직으로 정렬 */
        div {
            display: flex;
            flex-direction: column;
            margin-bottom: 10px; /* 각 질문 사이의 간격 조정 */
        }

        /* 라디오 버튼 라벨의 왼쪽 여백 설정 */
        label {
            margin-left: 10px;
        }
    </style>
</head>
<body>

<div>
    <div th:text="${result.split('#')[1]}"></div>
    <label><input type="radio" name="q1" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q1" value="3"> 그렇다.</label>
    <label><input type="radio" name="q1" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q1" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[2]}"></div>
    <label><input type="radio" name="q2" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q2" value="3"> 그렇다.</label>
    <label><input type="radio" name="q2" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q2" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[3]}"></div>
    <label><input type="radio" name="q3" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q3" value="3"> 그렇다.</label>
    <label><input type="radio" name="q3" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q3" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[4]}"></div>
    <label><input type="radio" name="q4" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q4" value="3"> 그렇다.</label>
    <label><input type="radio" name="q4" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q4" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[5]}"></div>
    <label><input type="radio" name="q5" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q5" value="3"> 그렇다.</label>
    <label><input type="radio" name="q5" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q5" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[6]}"></div>
    <label><input type="radio" name="q6" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q6" value="3"> 그렇다.</label>
    <label><input type="radio" name="q6" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q6" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[7]}"></div>
    <label><input type="radio" name="q7" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q7" value="3"> 그렇다.</label>
    <label><input type="radio" name="q7" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q7" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[8]}"></div>
    <label><input type="radio" name="q8" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q8" value="3"> 그렇다.</label>
    <label><input type="radio" name="q8" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q8" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[9]}"></div>
    <label><input type="radio" name="q9" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q9" value="3"> 그렇다.</label>
    <label><input type="radio" name="q9" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q9" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[10]}"></div>
    <label><input type="radio" name="q10" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q10" value="3"> 그렇다.</label>
    <label><input type="radio" name="q10" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q10" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[11]}"></div>
    <label><input type="radio" name="q11" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q11" value="3"> 그렇다.</label>
    <label><input type="radio" name="q11" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q11" value="1"> 매우 그렇지 않다.</label>
</div>

<div>
    <div th:text="${result.split('#')[12]}"></div>
    <label><input type="radio" name="q12" value="4"> 매우 그렇다.</label>
    <label><input type="radio" name="q12" value="3"> 그렇다.</label>
    <label><input type="radio" name="q12" value="2"> 그렇지 않다.</label>
    <label><input type="radio" name="q12" value="1"> 매우 그렇지 않다.</label>
</div>
<button onclick="calculateMBTI()">MBTI 판별하기</button>
<p id="mbti_result"></p>
<form id="mbti_form" action="/bot/resultMbti" method="post">
    <input type="hidden" id="mbti" name="mbti">
    <input type="submit" value="저장">
</form>

<script>
    function calculateMBTI() {
        var answers = [];
        var radios = document.querySelectorAll('input[type="radio"]:checked');
        for (var i = 0; i < radios.length; i++) {
            answers.push(parseInt(radios[i].value));
        }

        if (answers.length < 12) {
            alert("모든 질문에 답해주세요.");
            return;
        }

        var extrovert_score = answers.slice(0, 3).reduce((a, b) => a + b, 0);
        var sensing_score = answers.slice(4, 7).reduce((a, b) => a + b, 0);
        var intuition_score = answers.slice(7, 10).reduce((a, b) => a + b, 0);
        var thinking_score = answers.slice(10, 13).reduce((a, b) => a + b, 0);

        var mbti_type = "";
        mbti_type += extrovert_score >= 7.5 ? "E" : "I";
        mbti_type += sensing_score >= 7.5 ? "S" : "N";
        mbti_type += intuition_score >= 7.5 ? "T" : "F";
        mbti_type += thinking_score >= 7.5 ? "J" : "P";

        // 결과를 <p> 태그에 넣기
        document.getElementById("mbti_result").innerText = "당신의 MBTI 유형은 " + mbti_type + "입니다.";

        // hidden input 필드에 MBTI 유형 설정
        document.getElementById("mbti").value = mbti_type;

    }
</script>
</body>
</html>
